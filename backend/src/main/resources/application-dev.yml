spring:
  main:
    allow-bean-definition-overriding: true
  datasource:
    url: jdbc:postgresql://localhost:5432/meeting_minutes
    username: dev
    password: dev123
    driver-class-name: org.postgresql.Driver

  servlet:
    multipart:
      max-file-size: 500MB
      max-request-size: 500MB
      enabled: true

  data:
    redis:
      host: localhost
      port: 6379
    mongodb:
      uri: mongodb://localhost:27017/meeting_minutes
      auto-index-creation: true

  mail:
    host: smtp.gmail.com
    port: 587
    username: ${SMTP_USERNAME:your-email@gmail.com}
    password: ${SMTP_PASSWORD:your-app-password}
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
          connectiontimeout: 5000
          timeout: 5000
          writetimeout: 5000

  jpa:
    hibernate:
      ddl-auto: update
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true

  sql:
    init:
      mode: always

  security:
    oauth2:
      client:
        registration:
          google:
            client-id: ${GOOGLE_CLIENT_ID}
            client-secret: ${GOOGLE_CLIENT_SECRET}
            scope: email,profile
        provider:
          google:
            issuer-uri: https://accounts.google.com
logging:
  level:
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE
    org.hibernate.tool.schema.internal: DEBUG

jwt:
  secret: ${JWT_SECRET}
  expiration: ${JWT_EXPIRATION}

app:
  upload:
    temp-directory: /tmp/uploads
    max-file-size: 524288000
  oauth2:
    redirect-uri: http://localhost:3000/oauth2/redirect
  email:
    from: team.meetingminutes@gmail.com
    base-url: http://localhost:3000
  rate-limit:
    auth-per-minute: 10
    upload-per-minute: 5
    ai-processing-per-minute: 3

springdoc:
  swagger-ui:
    enabled: true
    path: /swagger-ui.html
    operations-sorter: alpha
    tags-sorter: alpha
  api-docs:
    enabled: true
    path: /v3/api-docs
  info:
    title: Academic Meeting Minutes Extractor API
    description: REST API for automated meeting minutes generation
    version: 1.0.0
    contact:
      name: Development Team
      email: dev@academicminutes.com
    license:
      name: Academic License
      url: https://academicminutes.com/license

ai:
  service:
    base-url: http://localhost:5001
    timeout: 300000  # 5 minutes in milliseconds
    retry:
      max-attempts: 3
      backoff-delay: 5000

resilience4j:
  circuitbreaker:
    instances:
      aiService:
        register-health-indicator: true
        sliding-window-type: COUNT_BASED
        sliding-window-size: 10
        failure-rate-threshold: 50
        wait-duration-in-open-state: 10s
        permitted-number-of-calls-in-half-open-state: 3
        automatic-transition-from-open-to-half-open-enabled: true
  retry:
    instances:
      aiService:
        max-attempts: 3
        wait-duration: 2s
        enable-exponential-backoff: true
        exponential-backoff-multiplier: 2
  ratelimiter:
    instances:
      authEndpoints:
        limit-for-period: 10
        limit-refresh-period: 1m
        timeout-duration: 5s
      fileUpload:
        limit-for-period: 5
        limit-refresh-period: 1m
        timeout-duration: 10s
      aiProcessing:
        limit-for-period: 3
        limit-refresh-period: 1m
        timeout-duration: 30s

